(self.AMP=self.AMP||[]).push({n:"amp-anim",v:"1525461683159",f:(function(AMP){var g;function h(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var k=self.log;function m(){if(!k.user)throw Error("failed to call initLogConstructor");return k.user};var n,p="Webkit webkit Moz moz ms O o".split(" ");function q(a){var b=void 0;n||(n=Object.create(null));var c=n.display;if(!c||b){c="display";if(void 0===a.display){var d;a:{for(d=0;d<p.length;d++){var e=p[d]+"Display";if(void 0!==a[e]){d=e;break a}}d=""}var f=d;void 0!==a[f]&&(c=f)}b||(n.display=c)}return c}function r(a,b){if(void 0===b){var c;c=(c=q(a.style))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=q(a.style);d&&(a.style[d]=c)};var t=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function v(a){m().assert(0<a.length,"Srcset must have at least one source");this.h=a;for(var b=!1,c=!1,d=0;d<a.length;d++)var e=a[d],b=b||!!e.width,c=c||!!e.dpr;m().assert(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?w:x);this.m=b}
v.prototype.select=function(a,b){if(this.m){b*=a;a=this.h;for(var c=0,d=Infinity,e=Infinity,f=0;f<a.length;f++){var l=a[f].width,u=Math.abs(l-b);if(u<=1.1*d||1.2<b/e)c=f,d=u,e=l;else break}}else for(a=this.h,c=0,d=Infinity,e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c;return this.h[b].url};v.prototype.getUrls=function(){return this.h.map(function(a){return a.url})};
v.prototype.stringify=function(a){for(var b=[],c=this.h,d=0;d<c.length;d++){var e=c[d],f=e.url;a&&(f=a(f));f=this.m?f+(" "+e.width+"w"):f+(" "+e.dpr+"x");b.push(f)}return b.join(", ")};function w(a,b){m().assert(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function x(a,b){m().assert(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr};function y(a){a=AMP.BaseElement.call(this,a)||this;a.c=null;a.l=null;a.j=!1;return a}h(y,AMP.BaseElement);g=y.prototype;g.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
g.buildCallback=function(){this.c=new Image;this.c.setAttribute("decoding","async");this.propagateAttributes(["alt","aria-label","aria-describedby","aria-labelledby"],this.c);this.applyFillContent(this.c,!0);"img"==this.element.getAttribute("role")&&(this.element.removeAttribute("role"),this.user().error("AMP-ANIM","Setting role=img on amp-anim elements breaks screen readers. Please just set alt or ARIA attributes, they will be correctly propagated for the underlying <img> element."));r(this.c,!this.getPlaceholder());
this.element.appendChild(this.c)};g.isRelayoutNeeded=function(){return!0};
g.layoutCallback=function(){if(!this.l){var a;var b=this.element;if(a=b.getAttribute("srcset")){for(var b=[],c;c=t.exec(a);){var d=c[1],e=void 0,f;if(c[2]){var l=c[3].toLowerCase();if("w"==l)e=parseInt(c[2],10);else if("x"==l)f=parseFloat(c[2]);else continue}else f=1;b.push({url:d,width:e,dpr:f})}a=new v(b)}else a=m().assert(b.getAttribute("src"),'Either non-empty "srcset" or "src" attribute must be specified: %s',b),a=new v([{url:a,width:void 0,dpr:1}]);this.l=a}return z(this)};
g.firstLayoutCompleted=function(){this.j=!0;A(this)};g.viewportCallback=function(){this.j&&A(this)};g.unlayoutCallback=function(){this.c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this.j=!1;return!0};function A(a){var b=a.isInViewport();a.togglePlaceholder(!b);r(a.c,b)}
function z(a){if(0>=a.getLayoutWidth())return Promise.resolve();var b=a.l.select(a.getViewport().getWidth()||a.win.screen.width,a.getDpr());if(b==a.c.getAttribute("src"))return Promise.resolve();a.c.setAttribute("src",b);return a.loadPromise(a.c).catch(function(b){if(a.c.getAttribute("src"))throw b;})}(function(a){a.registerElement("amp-anim",y)})(self.AMP);
})});
//# sourceMappingURL=amp-anim-0.1.js.map

